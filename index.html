<!DOCTYPE html>
<html>
	<head>
		<title>
			GhostHost
		</title>
		<script>

			var cors_api_url = 'https://cors-anywhere.herokuapp.com/';

			function doCORSRequest(options, printResult) {

				var x = new XMLHttpRequest();

				x.open(options.method, cors_api_url + options.url);
				x.onload = x.onerror = function() {
						
					printResult(
						options.method + ' ' + options.url + '\n' +
						x.status + ' ' + x.statusText + '\n\n' +
						(x.responseText || '')
					);
				};

				if (/^POST/i.test(options.method)) {

					x.setRequestHeader(
						'Content-Type',
						'application/x-www-form-urlencoded');
				}

				x.send(options.data);
			}

			function main() {

				// url/?path=[link]

				let uri = location.href.substring(location.href.indexOf("?") + 6);

				try {

					doCORSRequest({
						method: 'GET',
						url: uri,
						data: ""
					},
					function printResult(result) {
						console.log(result);
						console.log(typeof result);
					});
				}

				catch(error) {
					console.log(error.message);
				}
			}

			main();

		</script>
	</head>
	<body>

	</body>
</html>