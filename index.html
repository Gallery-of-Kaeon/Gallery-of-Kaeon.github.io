<!DOCTYPE html>
<html>
	<head>
		<title>
			GhostHost
		</title>
		<script>

			var cors_api_url = 'https://cors-anywhere.herokuapp.com/';

			function doCORSRequest(options, printResult) {

				var x = new XMLHttpRequest();

				x.open(options.method, cors_api_url + options.url);
				x.onload = x.onerror = function() {
						
					printResult(
						options.method + ' ' + options.url + '\n' +
						x.status + ' ' + x.statusText + '\n\n' +
						(x.responseText || '')
					);
				};

				if (/^POST/i.test(options.method)) {
					x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
				}

				x.send(options.data);
			}

			function main() {

				// url/?path=[link]

				let uri =
					"https://crossorigin.me/" +
						location.href.substring(
							location.href.indexOf("?") + 6);

				console.log(uri);

				try {
					
					var data = {};

					doCORSRequest({
						method: 'GET',
						url: uri,
						data: ""
					},
					function printResult(result) {
						data = result;
					});

					console.log(data);
				}

				catch(error) {
					console.log(error.message);
				}
			}

			main();

		</script>
	</head>
	<body>

	</body>
</html>